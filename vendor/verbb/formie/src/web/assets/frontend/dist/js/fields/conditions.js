/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/js/fields/conditions.js":
/*!*************************************!*\
  !*** ./src/js/fields/conditions.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"FormieConditions\": () => (/* binding */ FormieConditions)\n/* harmony export */ });\n/* harmony import */ var _utils_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/utils */ \"./src/js/utils/utils.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n\nvar FormieConditions = /*#__PURE__*/function () {\n  function FormieConditions() {\n    var settings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, FormieConditions);\n\n    this.$form = settings.$form;\n    this.form = this.$form.form; // Best-practice for storing data keyed by DOM nodes\n    // https://fitzgeraldnick.com/2014/01/13/hiding-implementation-details-with-e6-weakmaps.html\n\n    this.conditionsStore = new WeakMap();\n    this.initFieldConditions();\n  }\n\n  _createClass(FormieConditions, [{\n    key: \"initFieldConditions\",\n    value: function initFieldConditions() {\n      var _this = this;\n\n      this.$form.querySelectorAll('[data-field-conditions]').forEach(function ($field) {\n        var conditionSettings = _this.parseJsonConditions($field);\n\n        if (!conditionSettings || !conditionSettings.conditions.length) {\n          return;\n        } // Store the conditions against the target field object for later access/testing\n\n\n        var conditions = [];\n        conditionSettings.conditions.forEach(function (condition) {\n          // Get the field(s) we're targeting to watch for changes. Note we need to handle multiple fields (checkboxes)\n          var $targets = _this.$form.querySelectorAll(\"[name=\\\"\".concat(condition.field, \"\\\"]\")); // Check if we're dealing with multiple fields, like checkboxes. This overrides the above\n\n\n          var $multiFields = _this.$form.querySelectorAll(\"[name=\\\"\".concat(condition.field, \"[]\\\"]\"));\n\n          if ($multiFields.length) {\n            $targets = $multiFields;\n          } // Special handling for Repeater/Groups that have `new1` in their name but for page reload forms\n          // this will be replaced by the blockId, and will fail to match the conditions settings.\n\n\n          if ((!$targets || !$targets.length) && condition.field.includes('[new1]')) {\n            // Get tricky with Regex. Find the element that matches everything except `[new1]` for `[1234]`.\n            // Escape special characters `[]` in the string, and swap `[new1]` with `[\\d+]`.\n            var regexString = condition.field.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&').replace(/new1/g, '\\\\d+'); // Find all targets via Regex.\n\n            $targets = _this.querySelectorAllRegex(new RegExp(regexString), 'name');\n          }\n\n          if (!$targets || !$targets.length) {\n            return;\n          } // Store the conditions with the target field for later access/testing\n\n\n          condition.$targets = $targets;\n          conditions.push(condition);\n          $targets.forEach(function ($target) {\n            // Get the right event for the field\n            var eventType = _this.getEventType($target); // Watch for changes on the target field. When one occurs, fire off a custom event on the source field\n            // We need to do this because target fields can be targetted by multiple conditions, and source\n            // fields can have multiple conditions - we need to check them all for all/any logic.\n\n\n            _this.form.addEventListener($target, (0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)(eventType), function () {\n              return $field.dispatchEvent(new CustomEvent('onFormieEvaluateConditions', {\n                bubbles: true,\n                detail: {\n                  conditions: _this\n                }\n              }));\n            });\n          });\n        }); // Save our condition settings and targets against the origin fields. We'll use this to evaluate conditions\n\n        _this.conditionsStore.set($field, {\n          showRule: conditionSettings.showRule,\n          conditionRule: conditionSettings.conditionRule,\n          isNested: conditionSettings.isNested || false,\n          conditions: conditions\n        }); // Add a custom event listener to fire when the field event listener fires\n\n\n        _this.form.addEventListener($field, (0,_utils_utils__WEBPACK_IMPORTED_MODULE_0__.eventKey)('onFormieEvaluateConditions'), _this.evaluateConditions.bind(_this)); // Also - trigger the event right now to evaluate immediately. Namely if we need to hide\n        // field that are set to show if conditions are met. Pass in a param to let fields know if this is \"init\".\n\n\n        $field.dispatchEvent(new CustomEvent('onFormieEvaluateConditions', {\n          bubbles: true,\n          detail: {\n            conditions: _this,\n            init: true\n          }\n        }));\n      }); // Update the form hash, so we don't get change warnings\n\n      if (this.form.formTheme) {\n        this.form.formTheme.updateFormHash();\n      }\n    }\n  }, {\n    key: \"evaluateConditions\",\n    value: function evaluateConditions(e) {\n      var _this2 = this;\n\n      var $field = e.target;\n      var isInit = e.detail ? e.detail.init : false; // Get the prepped conditions for this field\n\n      var conditionSettings = this.conditionsStore.get($field);\n\n      if (!conditionSettings) {\n        return;\n      }\n\n      var showRule = conditionSettings.showRule,\n          conditionRule = conditionSettings.conditionRule,\n          conditions = conditionSettings.conditions,\n          isNested = conditionSettings.isNested;\n      var results = {};\n      conditions.forEach(function (condition, i) {\n        var logic = condition.condition,\n            value = condition.value,\n            $targets = condition.$targets,\n            field = condition.field; // We're always dealing with a collection of targets, even if the target is a text field\n        // The reason being is this normalises behaviour for some fields (checkbox/radio) that\n        // have multiple fields in a group.\n\n        $targets.forEach(function ($target) {\n          var result = false;\n          var testOptions = {};\n          var tagName = $target.tagName.toLowerCase();\n          var inputType = $target.getAttribute('type') ? $target.getAttribute('type').toLowerCase() : ''; // Create a key for this condition rule that we'll use to store (potentially multiple) results against.\n          // It's not visibly needed for anything, but using the target's field name helps with debugging.\n\n          var resultKey = \"\".concat(field, \"_\").concat(i); // Store all results as an array, and we'll normalise afterwards. Group results by their condition rule.\n          // For example: { dropdown_0: [false], radio_1: [true, false] }\n\n          if (!results[resultKey]) {\n            results[resultKey] = [];\n          } // Handle some special options like dates - tell our condition tester about them\n\n\n          if (inputType === 'date') {\n            testOptions.isDate = true;\n          } // Handle agree fields, which are a single checkbox, checked/unchecked\n\n\n          if ($target.getAttribute('data-fui-input-type') === 'agree') {\n            // Ignore the empty, hidden checkbox\n            if (inputType === 'hidden') {\n              return;\n            } // Convert the value to boolean to compare\n\n\n            result = _this2.testCondition(logic, value == '0' ? false : true, $target.checked);\n            results[resultKey].push(result);\n          } else if (inputType === 'checkbox' || inputType === 'radio') {\n            // Handle (multi) checkboxes and radio, which are a bit of a pain\n            result = _this2.testCondition(logic, value, $target.value) && $target.checked;\n            results[resultKey].push(result);\n          } else if (tagName === 'select' && $target.hasAttribute('multiple')) {\n            // Handle multi-selects\n            Array.from($target.options).forEach(function ($option) {\n              result = _this2.testCondition(logic, value, $option.value) && $option.selected;\n              results[resultKey].push(result);\n            });\n          } else {\n            result = _this2.testCondition(logic, value, $target.value, testOptions);\n            results[resultKey].push(result);\n          }\n        });\n      }); // Normalise the results before going further, as this'll be keyed as an object, so convert to an array\n      // and because we can have multiple inputs, each with their own value, reduce them to a single boolean.\n      // For example: { dropdown_0: [false], radio_1: [true, false] } changes to [false, true].\n\n      var normalisedResults = [];\n      Object.values(results).forEach(function (result) {\n        normalisedResults.push(result.includes(true));\n      });\n      var finalResult = false; // Check to see how to compare the result (any or all).\n\n      if (normalisedResults.length) {\n        if (conditionRule === 'all') {\n          // Are _all_ the conditions the same?\n          finalResult = normalisedResults.every(function (val) {\n            return val === true;\n          });\n        } else {\n          finalResult = normalisedResults.includes(true);\n        }\n      } // Check if this condition is nested in a Group/Repeater field. Only proceed if the parent field\n      // conditional evaluation has passed.\n\n\n      var overrideResult = false; // But *do* setup conditions on the first run, when initialising all the fields\n\n      if (isNested && !isInit) {\n        var $parentField = $field.closest('[data-field-type=\"group\"], [data-field-type=\"repeater\"]');\n\n        if ($parentField) {\n          // Is the parent field conditionally hidden? Force the evaluation to be true (this field is\n          // is conditionallu hidden), to prevent inner field conditions having a higher priority than the\n          // parent Group/Repeater fields.\n          if ($parentField.conditionallyHidden) {\n            overrideResult = true;\n          }\n        }\n      } // Show or hide? Also toggle the disabled state to sort out any hidden required fields\n\n\n      if (overrideResult || finalResult && showRule !== 'show' || !finalResult && showRule === 'show') {\n        $field.conditionallyHidden = true;\n        $field.setAttribute('data-conditionally-hidden', true);\n        $field.querySelectorAll('input, textarea, select').forEach(function ($input) {\n          $input.setAttribute('disabled', true);\n        });\n      } else {\n        $field.conditionallyHidden = false;\n        $field.removeAttribute('data-conditionally-hidden');\n        $field.querySelectorAll('input, textarea, select').forEach(function ($input) {\n          $input.removeAttribute('disabled');\n        });\n      } // Fire an event to notify that the field's conditions have been evaluated\n\n\n      $field.dispatchEvent(new CustomEvent('onAfterFormieEvaluateConditions', {\n        bubbles: true,\n        detail: {\n          conditions: this,\n          init: isInit\n        }\n      }));\n    }\n  }, {\n    key: \"parseJsonConditions\",\n    value: function parseJsonConditions($field) {\n      var json = $field.getAttribute('data-field-conditions');\n\n      if (json) {\n        try {\n          return JSON.parse(json);\n        } catch (e) {\n          console.error(\"Unable to parse JSON conditions: \".concat(e));\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"getEventType\",\n    value: function getEventType($field) {\n      var tagName = $field.tagName.toLowerCase();\n      var inputType = $field.getAttribute('type') ? $field.getAttribute('type').toLowerCase() : '';\n\n      if (tagName === 'select' || inputType === 'date') {\n        return 'change';\n      }\n\n      if (inputType === 'number') {\n        return 'input';\n      }\n\n      if (inputType === 'checkbox' || inputType === 'radio') {\n        return 'click';\n      }\n\n      return 'keyup';\n    }\n  }, {\n    key: \"testCondition\",\n    value: function testCondition(logic, value, fieldValue) {\n      var testOptions = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n      var result = false; // Are we dealing with dates? That's a whole other mess...\n\n      if (testOptions.isDate) {\n        value = new Date(value).valueOf();\n        fieldValue = new Date(fieldValue).valueOf();\n      }\n\n      if (logic === '=') {\n        result = value === fieldValue;\n      } else if (logic === '!=') {\n        result = value !== fieldValue;\n      } else if (logic === '>') {\n        result = parseFloat(fieldValue, 10) > parseFloat(value, 10);\n      } else if (logic === '<') {\n        result = parseFloat(fieldValue, 10) < parseFloat(value, 10);\n      } else if (logic === 'contains') {\n        result = fieldValue.includes(value);\n      } else if (logic === 'startsWith') {\n        result = fieldValue.startsWith(value);\n      } else if (logic === 'endsWith') {\n        result = fieldValue.endsWith(value);\n      }\n\n      return result;\n    }\n  }, {\n    key: \"querySelectorAllRegex\",\n    value: function querySelectorAllRegex(regex, attributeToSearch) {\n      var output = [];\n\n      var _iterator = _createForOfIteratorHelper(this.$form.querySelectorAll(\"[\".concat(attributeToSearch, \"]\"))),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var element = _step.value;\n\n          if (regex.test(element.getAttribute(attributeToSearch))) {\n            output.push(element);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return output;\n    }\n  }]);\n\n  return FormieConditions;\n}();\nwindow.FormieConditions = FormieConditions;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVUsQ0FBQ0ssUUFBWCxDQUFvQnhDLEtBQXBCLENBQVQ7TUFDSDs7TUFFRCxPQUFPQyxNQUFQO0lBQ0g7RUFqU0w7SUFBQTtJQUFBLE9BbVNJLCtCQUFzQndDLEtBQXRCLEVBQTZCQyxpQkFBN0IsRUFBZ0Q7TUFDNUMsSUFBTUMsTUFBTSxHQUFHLEVBQWY7O01BRDRDLDJDQUd0QixLQUFLekYsS0FBTCxDQUFXSyxnQkFBWCxZQUFnQ21GLGlCQUFoQyxPQUhzQjtNQUFBOztNQUFBO1FBRzVDLG9EQUE2RTtVQUFBLElBQWxFRSxPQUFrRTs7VUFDekUsSUFBSUgsS0FBSyxDQUFDSSxJQUFOLENBQVdELE9BQU8sQ0FBQ3RDLFlBQVIsQ0FBcUJvQyxpQkFBckIsQ0FBWCxDQUFKLEVBQXlEO1lBQ3JEQyxNQUFNLENBQUNwRSxJQUFQLENBQVlxRSxPQUFaO1VBQ0g7UUFDSjtNQVAyQztRQUFBO01BQUE7UUFBQTtNQUFBOztNQVM1QyxPQUFPRCxNQUFQO0lBQ0g7RUE3U0w7O0VBQUE7QUFBQTtBQWdUQUcsTUFBTSxDQUFDOUYsZ0JBQVAsR0FBMEJBLGdCQUExQiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9qcy9maWVsZHMvY29uZGl0aW9ucy5qcz8yOWU0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV2ZW50S2V5IH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgRm9ybWllQ29uZGl0aW9ucyB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MgPSB7fSkge1xuICAgICAgICB0aGlzLiRmb3JtID0gc2V0dGluZ3MuJGZvcm07XG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMuJGZvcm0uZm9ybTtcblxuICAgICAgICAvLyBCZXN0LXByYWN0aWNlIGZvciBzdG9yaW5nIGRhdGEga2V5ZWQgYnkgRE9NIG5vZGVzXG4gICAgICAgIC8vIGh0dHBzOi8vZml0emdlcmFsZG5pY2suY29tLzIwMTQvMDEvMTMvaGlkaW5nLWltcGxlbWVudGF0aW9uLWRldGFpbHMtd2l0aC1lNi13ZWFrbWFwcy5odG1sXG4gICAgICAgIHRoaXMuY29uZGl0aW9uc1N0b3JlID0gbmV3IFdlYWtNYXAoKTtcblxuICAgICAgICB0aGlzLmluaXRGaWVsZENvbmRpdGlvbnMoKTtcbiAgICB9XG5cbiAgICBpbml0RmllbGRDb25kaXRpb25zKCkge1xuICAgICAgICB0aGlzLiRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWZpZWxkLWNvbmRpdGlvbnNdJykuZm9yRWFjaCgoJGZpZWxkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb25kaXRpb25TZXR0aW5ncyA9IHRoaXMucGFyc2VKc29uQ29uZGl0aW9ucygkZmllbGQpO1xuXG4gICAgICAgICAgICBpZiAoIWNvbmRpdGlvblNldHRpbmdzIHx8ICFjb25kaXRpb25TZXR0aW5ncy5jb25kaXRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIGNvbmRpdGlvbnMgYWdhaW5zdCB0aGUgdGFyZ2V0IGZpZWxkIG9iamVjdCBmb3IgbGF0ZXIgYWNjZXNzL3Rlc3RpbmdcbiAgICAgICAgICAgIGNvbnN0IGNvbmRpdGlvbnMgPSBbXTtcblxuICAgICAgICAgICAgY29uZGl0aW9uU2V0dGluZ3MuY29uZGl0aW9ucy5mb3JFYWNoKChjb25kaXRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGZpZWxkKHMpIHdlJ3JlIHRhcmdldGluZyB0byB3YXRjaCBmb3IgY2hhbmdlcy4gTm90ZSB3ZSBuZWVkIHRvIGhhbmRsZSBtdWx0aXBsZSBmaWVsZHMgKGNoZWNrYm94ZXMpXG4gICAgICAgICAgICAgICAgbGV0ICR0YXJnZXRzID0gdGhpcy4kZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGBbbmFtZT1cIiR7Y29uZGl0aW9uLmZpZWxkfVwiXWApO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIG11bHRpcGxlIGZpZWxkcywgbGlrZSBjaGVja2JveGVzLiBUaGlzIG92ZXJyaWRlcyB0aGUgYWJvdmVcbiAgICAgICAgICAgICAgICBjb25zdCAkbXVsdGlGaWVsZHMgPSB0aGlzLiRmb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoYFtuYW1lPVwiJHtjb25kaXRpb24uZmllbGR9W11cIl1gKTtcblxuICAgICAgICAgICAgICAgIGlmICgkbXVsdGlGaWVsZHMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXRzID0gJG11bHRpRmllbGRzO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIFJlcGVhdGVyL0dyb3VwcyB0aGF0IGhhdmUgYG5ldzFgIGluIHRoZWlyIG5hbWUgYnV0IGZvciBwYWdlIHJlbG9hZCBmb3Jtc1xuICAgICAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgYmxvY2tJZCwgYW5kIHdpbGwgZmFpbCB0byBtYXRjaCB0aGUgY29uZGl0aW9ucyBzZXR0aW5ncy5cbiAgICAgICAgICAgICAgICBpZiAoKCEkdGFyZ2V0cyB8fCAhJHRhcmdldHMubGVuZ3RoKSAmJiBjb25kaXRpb24uZmllbGQuaW5jbHVkZXMoJ1tuZXcxXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCB0cmlja3kgd2l0aCBSZWdleC4gRmluZCB0aGUgZWxlbWVudCB0aGF0IG1hdGNoZXMgZXZlcnl0aGluZyBleGNlcHQgYFtuZXcxXWAgZm9yIGBbMTIzNF1gLlxuICAgICAgICAgICAgICAgICAgICAvLyBFc2NhcGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGBbXWAgaW4gdGhlIHN0cmluZywgYW5kIHN3YXAgYFtuZXcxXWAgd2l0aCBgW1xcZCtdYC5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVnZXhTdHJpbmcgPSBjb25kaXRpb24uZmllbGQucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csICdcXFxcJCYnKS5yZXBsYWNlKC9uZXcxL2csICdcXFxcZCsnKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCB0YXJnZXRzIHZpYSBSZWdleC5cbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldHMgPSB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGxSZWdleChuZXcgUmVnRXhwKHJlZ2V4U3RyaW5nKSwgJ25hbWUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoISR0YXJnZXRzIHx8ICEkdGFyZ2V0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBjb25kaXRpb25zIHdpdGggdGhlIHRhcmdldCBmaWVsZCBmb3IgbGF0ZXIgYWNjZXNzL3Rlc3RpbmdcbiAgICAgICAgICAgICAgICBjb25kaXRpb24uJHRhcmdldHMgPSAkdGFyZ2V0cztcbiAgICAgICAgICAgICAgICBjb25kaXRpb25zLnB1c2goY29uZGl0aW9uKTtcblxuICAgICAgICAgICAgICAgICR0YXJnZXRzLmZvckVhY2goKCR0YXJnZXQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSByaWdodCBldmVudCBmb3IgdGhlIGZpZWxkXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50VHlwZSA9IHRoaXMuZ2V0RXZlbnRUeXBlKCR0YXJnZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdhdGNoIGZvciBjaGFuZ2VzIG9uIHRoZSB0YXJnZXQgZmllbGQuIFdoZW4gb25lIG9jY3VycywgZmlyZSBvZmYgYSBjdXN0b20gZXZlbnQgb24gdGhlIHNvdXJjZSBmaWVsZFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRvIHRoaXMgYmVjYXVzZSB0YXJnZXQgZmllbGRzIGNhbiBiZSB0YXJnZXR0ZWQgYnkgbXVsdGlwbGUgY29uZGl0aW9ucywgYW5kIHNvdXJjZVxuICAgICAgICAgICAgICAgICAgICAvLyBmaWVsZHMgY2FuIGhhdmUgbXVsdGlwbGUgY29uZGl0aW9ucyAtIHdlIG5lZWQgdG8gY2hlY2sgdGhlbSBhbGwgZm9yIGFsbC9hbnkgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5hZGRFdmVudExpc3RlbmVyKCR0YXJnZXQsIGV2ZW50S2V5KGV2ZW50VHlwZSksICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkZmllbGQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ29uRm9ybWllRXZhbHVhdGVDb25kaXRpb25zJywgeyBidWJibGVzOiB0cnVlLCBkZXRhaWw6IHsgY29uZGl0aW9uczogdGhpcyB9IH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gU2F2ZSBvdXIgY29uZGl0aW9uIHNldHRpbmdzIGFuZCB0YXJnZXRzIGFnYWluc3QgdGhlIG9yaWdpbiBmaWVsZHMuIFdlJ2xsIHVzZSB0aGlzIHRvIGV2YWx1YXRlIGNvbmRpdGlvbnNcbiAgICAgICAgICAgIHRoaXMuY29uZGl0aW9uc1N0b3JlLnNldCgkZmllbGQsIHtcbiAgICAgICAgICAgICAgICBzaG93UnVsZTogY29uZGl0aW9uU2V0dGluZ3Muc2hvd1J1bGUsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9uUnVsZTogY29uZGl0aW9uU2V0dGluZ3MuY29uZGl0aW9uUnVsZSxcbiAgICAgICAgICAgICAgICBpc05lc3RlZDogY29uZGl0aW9uU2V0dGluZ3MuaXNOZXN0ZWQgfHwgZmFsc2UsXG4gICAgICAgICAgICAgICAgY29uZGl0aW9ucyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBBZGQgYSBjdXN0b20gZXZlbnQgbGlzdGVuZXIgdG8gZmlyZSB3aGVuIHRoZSBmaWVsZCBldmVudCBsaXN0ZW5lciBmaXJlc1xuICAgICAgICAgICAgdGhpcy5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJGZpZWxkLCBldmVudEtleSgnb25Gb3JtaWVFdmFsdWF0ZUNvbmRpdGlvbnMnKSwgdGhpcy5ldmFsdWF0ZUNvbmRpdGlvbnMuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgIC8vIEFsc28gLSB0cmlnZ2VyIHRoZSBldmVudCByaWdodCBub3cgdG8gZXZhbHVhdGUgaW1tZWRpYXRlbHkuIE5hbWVseSBpZiB3ZSBuZWVkIHRvIGhpZGVcbiAgICAgICAgICAgIC8vIGZpZWxkIHRoYXQgYXJlIHNldCB0byBzaG93IGlmIGNvbmRpdGlvbnMgYXJlIG1ldC4gUGFzcyBpbiBhIHBhcmFtIHRvIGxldCBmaWVsZHMga25vdyBpZiB0aGlzIGlzIFwiaW5pdFwiLlxuICAgICAgICAgICAgJGZpZWxkLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdvbkZvcm1pZUV2YWx1YXRlQ29uZGl0aW9ucycsIHsgYnViYmxlczogdHJ1ZSwgZGV0YWlsOiB7IGNvbmRpdGlvbnM6IHRoaXMsIGluaXQ6IHRydWUgfSB9KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZm9ybSBoYXNoLCBzbyB3ZSBkb24ndCBnZXQgY2hhbmdlIHdhcm5pbmdzXG4gICAgICAgIGlmICh0aGlzLmZvcm0uZm9ybVRoZW1lKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm0uZm9ybVRoZW1lLnVwZGF0ZUZvcm1IYXNoKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBldmFsdWF0ZUNvbmRpdGlvbnMoZSkge1xuICAgICAgICBjb25zdCAkZmllbGQgPSBlLnRhcmdldDtcbiAgICAgICAgY29uc3QgaXNJbml0ID0gZS5kZXRhaWwgPyBlLmRldGFpbC5pbml0IDogZmFsc2U7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBwcmVwcGVkIGNvbmRpdGlvbnMgZm9yIHRoaXMgZmllbGRcbiAgICAgICAgY29uc3QgY29uZGl0aW9uU2V0dGluZ3MgPSB0aGlzLmNvbmRpdGlvbnNTdG9yZS5nZXQoJGZpZWxkKTtcblxuICAgICAgICBpZiAoIWNvbmRpdGlvblNldHRpbmdzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzaG93UnVsZSwgY29uZGl0aW9uUnVsZSwgY29uZGl0aW9ucywgaXNOZXN0ZWQsXG4gICAgICAgIH0gPSBjb25kaXRpb25TZXR0aW5ncztcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHt9O1xuXG4gICAgICAgIGNvbmRpdGlvbnMuZm9yRWFjaCgoY29uZGl0aW9uLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgY29uZGl0aW9uOiBsb2dpYywgdmFsdWUsICR0YXJnZXRzLCBmaWVsZCxcbiAgICAgICAgICAgIH0gPSBjb25kaXRpb247XG5cbiAgICAgICAgICAgIC8vIFdlJ3JlIGFsd2F5cyBkZWFsaW5nIHdpdGggYSBjb2xsZWN0aW9uIG9mIHRhcmdldHMsIGV2ZW4gaWYgdGhlIHRhcmdldCBpcyBhIHRleHQgZmllbGRcbiAgICAgICAgICAgIC8vIFRoZSByZWFzb24gYmVpbmcgaXMgdGhpcyBub3JtYWxpc2VzIGJlaGF2aW91ciBmb3Igc29tZSBmaWVsZHMgKGNoZWNrYm94L3JhZGlvKSB0aGF0XG4gICAgICAgICAgICAvLyBoYXZlIG11bHRpcGxlIGZpZWxkcyBpbiBhIGdyb3VwLlxuICAgICAgICAgICAgJHRhcmdldHMuZm9yRWFjaCgoJHRhcmdldCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXN0T3B0aW9ucyA9IHt9O1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhZ05hbWUgPSAkdGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dFR5cGUgPSAkdGFyZ2V0LmdldEF0dHJpYnV0ZSgndHlwZScpID8gJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBrZXkgZm9yIHRoaXMgY29uZGl0aW9uIHJ1bGUgdGhhdCB3ZSdsbCB1c2UgdG8gc3RvcmUgKHBvdGVudGlhbGx5IG11bHRpcGxlKSByZXN1bHRzIGFnYWluc3QuXG4gICAgICAgICAgICAgICAgLy8gSXQncyBub3QgdmlzaWJseSBuZWVkZWQgZm9yIGFueXRoaW5nLCBidXQgdXNpbmcgdGhlIHRhcmdldCdzIGZpZWxkIG5hbWUgaGVscHMgd2l0aCBkZWJ1Z2dpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0S2V5ID0gYCR7ZmllbGR9XyR7aX1gO1xuXG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgYWxsIHJlc3VsdHMgYXMgYW4gYXJyYXksIGFuZCB3ZSdsbCBub3JtYWxpc2UgYWZ0ZXJ3YXJkcy4gR3JvdXAgcmVzdWx0cyBieSB0aGVpciBjb25kaXRpb24gcnVsZS5cbiAgICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogeyBkcm9wZG93bl8wOiBbZmFsc2VdLCByYWRpb18xOiBbdHJ1ZSwgZmFsc2VdIH1cbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdHNbcmVzdWx0S2V5XSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW3Jlc3VsdEtleV0gPSBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgc29tZSBzcGVjaWFsIG9wdGlvbnMgbGlrZSBkYXRlcyAtIHRlbGwgb3VyIGNvbmRpdGlvbiB0ZXN0ZXIgYWJvdXQgdGhlbVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dFR5cGUgPT09ICdkYXRlJykge1xuICAgICAgICAgICAgICAgICAgICB0ZXN0T3B0aW9ucy5pc0RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSBhZ3JlZSBmaWVsZHMsIHdoaWNoIGFyZSBhIHNpbmdsZSBjaGVja2JveCwgY2hlY2tlZC91bmNoZWNrZWRcbiAgICAgICAgICAgICAgICBpZiAoJHRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZnVpLWlucHV0LXR5cGUnKSA9PT0gJ2FncmVlJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgdGhlIGVtcHR5LCBoaWRkZW4gY2hlY2tib3hcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VHlwZSA9PT0gJ2hpZGRlbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHZhbHVlIHRvIGJvb2xlYW4gdG8gY29tcGFyZVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0aGlzLnRlc3RDb25kaXRpb24obG9naWMsICh2YWx1ZSA9PSAnMCcpID8gZmFsc2UgOiB0cnVlLCAkdGFyZ2V0LmNoZWNrZWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbcmVzdWx0S2V5XS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICdjaGVja2JveCcgfHwgaW5wdXRUeXBlID09PSAncmFkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSAobXVsdGkpIGNoZWNrYm94ZXMgYW5kIHJhZGlvLCB3aGljaCBhcmUgYSBiaXQgb2YgYSBwYWluXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudGVzdENvbmRpdGlvbihsb2dpYywgdmFsdWUsICR0YXJnZXQudmFsdWUpICYmICR0YXJnZXQuY2hlY2tlZDtcblxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW3Jlc3VsdEtleV0ucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGFnTmFtZSA9PT0gJ3NlbGVjdCcgJiYgJHRhcmdldC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSGFuZGxlIG11bHRpLXNlbGVjdHNcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkuZnJvbSgkdGFyZ2V0Lm9wdGlvbnMpLmZvckVhY2goKCRvcHRpb24pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudGVzdENvbmRpdGlvbihsb2dpYywgdmFsdWUsICRvcHRpb24udmFsdWUpICYmICRvcHRpb24uc2VsZWN0ZWQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbcmVzdWx0S2V5XS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMudGVzdENvbmRpdGlvbihsb2dpYywgdmFsdWUsICR0YXJnZXQudmFsdWUsIHRlc3RPcHRpb25zKTtcblxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW3Jlc3VsdEtleV0ucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBOb3JtYWxpc2UgdGhlIHJlc3VsdHMgYmVmb3JlIGdvaW5nIGZ1cnRoZXIsIGFzIHRoaXMnbGwgYmUga2V5ZWQgYXMgYW4gb2JqZWN0LCBzbyBjb252ZXJ0IHRvIGFuIGFycmF5XG4gICAgICAgIC8vIGFuZCBiZWNhdXNlIHdlIGNhbiBoYXZlIG11bHRpcGxlIGlucHV0cywgZWFjaCB3aXRoIHRoZWlyIG93biB2YWx1ZSwgcmVkdWNlIHRoZW0gdG8gYSBzaW5nbGUgYm9vbGVhbi5cbiAgICAgICAgLy8gRm9yIGV4YW1wbGU6IHsgZHJvcGRvd25fMDogW2ZhbHNlXSwgcmFkaW9fMTogW3RydWUsIGZhbHNlXSB9IGNoYW5nZXMgdG8gW2ZhbHNlLCB0cnVlXS5cbiAgICAgICAgY29uc3Qgbm9ybWFsaXNlZFJlc3VsdHMgPSBbXTtcblxuICAgICAgICBPYmplY3QudmFsdWVzKHJlc3VsdHMpLmZvckVhY2goKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgbm9ybWFsaXNlZFJlc3VsdHMucHVzaChyZXN1bHQuaW5jbHVkZXModHJ1ZSkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgZmluYWxSZXN1bHQgPSBmYWxzZTtcblxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaG93IHRvIGNvbXBhcmUgdGhlIHJlc3VsdCAoYW55IG9yIGFsbCkuXG4gICAgICAgIGlmIChub3JtYWxpc2VkUmVzdWx0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25SdWxlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgIC8vIEFyZSBfYWxsXyB0aGUgY29uZGl0aW9ucyB0aGUgc2FtZT9cbiAgICAgICAgICAgICAgICBmaW5hbFJlc3VsdCA9IG5vcm1hbGlzZWRSZXN1bHRzLmV2ZXJ5KCh2YWwpID0+IHsgcmV0dXJuIHZhbCA9PT0gdHJ1ZTsgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmFsUmVzdWx0ID0gbm9ybWFsaXNlZFJlc3VsdHMuaW5jbHVkZXModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGNvbmRpdGlvbiBpcyBuZXN0ZWQgaW4gYSBHcm91cC9SZXBlYXRlciBmaWVsZC4gT25seSBwcm9jZWVkIGlmIHRoZSBwYXJlbnQgZmllbGRcbiAgICAgICAgLy8gY29uZGl0aW9uYWwgZXZhbHVhdGlvbiBoYXMgcGFzc2VkLlxuICAgICAgICBsZXQgb3ZlcnJpZGVSZXN1bHQgPSBmYWxzZTtcblxuICAgICAgICAvLyBCdXQgKmRvKiBzZXR1cCBjb25kaXRpb25zIG9uIHRoZSBmaXJzdCBydW4sIHdoZW4gaW5pdGlhbGlzaW5nIGFsbCB0aGUgZmllbGRzXG4gICAgICAgIGlmIChpc05lc3RlZCAmJiAhaXNJbml0KSB7XG4gICAgICAgICAgICBjb25zdCAkcGFyZW50RmllbGQgPSAkZmllbGQuY2xvc2VzdCgnW2RhdGEtZmllbGQtdHlwZT1cImdyb3VwXCJdLCBbZGF0YS1maWVsZC10eXBlPVwicmVwZWF0ZXJcIl0nKTtcblxuICAgICAgICAgICAgaWYgKCRwYXJlbnRGaWVsZCkge1xuICAgICAgICAgICAgICAgIC8vIElzIHRoZSBwYXJlbnQgZmllbGQgY29uZGl0aW9uYWxseSBoaWRkZW4/IEZvcmNlIHRoZSBldmFsdWF0aW9uIHRvIGJlIHRydWUgKHRoaXMgZmllbGQgaXNcbiAgICAgICAgICAgICAgICAvLyBpcyBjb25kaXRpb25hbGx1IGhpZGRlbiksIHRvIHByZXZlbnQgaW5uZXIgZmllbGQgY29uZGl0aW9ucyBoYXZpbmcgYSBoaWdoZXIgcHJpb3JpdHkgdGhhbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBwYXJlbnQgR3JvdXAvUmVwZWF0ZXIgZmllbGRzLlxuICAgICAgICAgICAgICAgIGlmICgkcGFyZW50RmllbGQuY29uZGl0aW9uYWxseUhpZGRlbikge1xuICAgICAgICAgICAgICAgICAgICBvdmVycmlkZVJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hvdyBvciBoaWRlPyBBbHNvIHRvZ2dsZSB0aGUgZGlzYWJsZWQgc3RhdGUgdG8gc29ydCBvdXQgYW55IGhpZGRlbiByZXF1aXJlZCBmaWVsZHNcbiAgICAgICAgaWYgKG92ZXJyaWRlUmVzdWx0IHx8IChmaW5hbFJlc3VsdCAmJiBzaG93UnVsZSAhPT0gJ3Nob3cnKSB8fCAoIWZpbmFsUmVzdWx0ICYmIHNob3dSdWxlID09PSAnc2hvdycpKSB7XG4gICAgICAgICAgICAkZmllbGQuY29uZGl0aW9uYWxseUhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAkZmllbGQuc2V0QXR0cmlidXRlKCdkYXRhLWNvbmRpdGlvbmFsbHktaGlkZGVuJywgdHJ1ZSk7XG5cbiAgICAgICAgICAgICRmaWVsZC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcpLmZvckVhY2goKCRpbnB1dCkgPT4ge1xuICAgICAgICAgICAgICAgICRpbnB1dC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRmaWVsZC5jb25kaXRpb25hbGx5SGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICAkZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWNvbmRpdGlvbmFsbHktaGlkZGVuJyk7XG5cbiAgICAgICAgICAgICRmaWVsZC5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdCcpLmZvckVhY2goKCRpbnB1dCkgPT4ge1xuICAgICAgICAgICAgICAgICRpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpcmUgYW4gZXZlbnQgdG8gbm90aWZ5IHRoYXQgdGhlIGZpZWxkJ3MgY29uZGl0aW9ucyBoYXZlIGJlZW4gZXZhbHVhdGVkXG4gICAgICAgICRmaWVsZC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnb25BZnRlckZvcm1pZUV2YWx1YXRlQ29uZGl0aW9ucycsIHtcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25zOiB0aGlzLFxuICAgICAgICAgICAgICAgIGluaXQ6IGlzSW5pdCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBwYXJzZUpzb25Db25kaXRpb25zKCRmaWVsZCkge1xuICAgICAgICBjb25zdCBqc29uID0gJGZpZWxkLmdldEF0dHJpYnV0ZSgnZGF0YS1maWVsZC1jb25kaXRpb25zJyk7XG5cbiAgICAgICAgaWYgKGpzb24pIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVW5hYmxlIHRvIHBhcnNlIEpTT04gY29uZGl0aW9uczogJHtlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGdldEV2ZW50VHlwZSgkZmllbGQpIHtcbiAgICAgICAgY29uc3QgdGFnTmFtZSA9ICRmaWVsZC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGNvbnN0IGlucHV0VHlwZSA9ICRmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA/ICRmaWVsZC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cbiAgICAgICAgaWYgKHRhZ05hbWUgPT09ICdzZWxlY3QnIHx8IGlucHV0VHlwZSA9PT0gJ2RhdGUnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NoYW5nZSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXRUeXBlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgcmV0dXJuICdpbnB1dCc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5wdXRUeXBlID09PSAnY2hlY2tib3gnIHx8IGlucHV0VHlwZSA9PT0gJ3JhZGlvJykge1xuICAgICAgICAgICAgcmV0dXJuICdjbGljayc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ2tleXVwJztcbiAgICB9XG5cbiAgICB0ZXN0Q29uZGl0aW9uKGxvZ2ljLCB2YWx1ZSwgZmllbGRWYWx1ZSwgdGVzdE9wdGlvbnMgPSB7fSkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQXJlIHdlIGRlYWxpbmcgd2l0aCBkYXRlcz8gVGhhdCdzIGEgd2hvbGUgb3RoZXIgbWVzcy4uLlxuICAgICAgICBpZiAodGVzdE9wdGlvbnMuaXNEYXRlKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG5ldyBEYXRlKHZhbHVlKS52YWx1ZU9mKCk7XG4gICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3IERhdGUoZmllbGRWYWx1ZSkudmFsdWVPZigpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxvZ2ljID09PSAnPScpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHZhbHVlID09PSBmaWVsZFZhbHVlO1xuICAgICAgICB9IGVsc2UgaWYgKGxvZ2ljID09PSAnIT0nKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB2YWx1ZSAhPT0gZmllbGRWYWx1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2dpYyA9PT0gJz4nKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBwYXJzZUZsb2F0KGZpZWxkVmFsdWUsIDEwKSA+IHBhcnNlRmxvYXQodmFsdWUsIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2dpYyA9PT0gJzwnKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBwYXJzZUZsb2F0KGZpZWxkVmFsdWUsIDEwKSA8IHBhcnNlRmxvYXQodmFsdWUsIDEwKTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2dpYyA9PT0gJ2NvbnRhaW5zJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmllbGRWYWx1ZS5pbmNsdWRlcyh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobG9naWMgPT09ICdzdGFydHNXaXRoJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmllbGRWYWx1ZS5zdGFydHNXaXRoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsb2dpYyA9PT0gJ2VuZHNXaXRoJykge1xuICAgICAgICAgICAgcmVzdWx0ID0gZmllbGRWYWx1ZS5lbmRzV2l0aCh2YWx1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHF1ZXJ5U2VsZWN0b3JBbGxSZWdleChyZWdleCwgYXR0cmlidXRlVG9TZWFyY2gpIHtcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XG5cbiAgICAgICAgZm9yIChjb25zdCBlbGVtZW50IG9mIHRoaXMuJGZvcm0ucXVlcnlTZWxlY3RvckFsbChgWyR7YXR0cmlidXRlVG9TZWFyY2h9XWApKSB7XG4gICAgICAgICAgICBpZiAocmVnZXgudGVzdChlbGVtZW50LmdldEF0dHJpYnV0ZShhdHRyaWJ1dGVUb1NlYXJjaCkpKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goZWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbn1cblxud2luZG93LkZvcm1pZUNvbmRpdGlvbnMgPSBGb3JtaWVDb25kaXRpb25zO1xuIl0sIm5hbWVzIjpbImV2ZW50S2V5IiwiRm9ybWllQ29uZGl0aW9ucyIsInNldHRpbmdzIiwiJGZvcm0iLCJmb3JtIiwiY29uZGl0aW9uc1N0b3JlIiwiV2Vha01hcCIsImluaXRGaWVsZENvbmRpdGlvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsIiRmaWVsZCIsImNvbmRpdGlvblNldHRpbmdzIiwicGFyc2VKc29uQ29uZGl0aW9ucyIsImNvbmRpdGlvbnMiLCJsZW5ndGgiLCJjb25kaXRpb24iLCIkdGFyZ2V0cyIsImZpZWxkIiwiJG11bHRpRmllbGRzIiwiaW5jbHVkZXMiLCJyZWdleFN0cmluZyIsInJlcGxhY2UiLCJxdWVyeVNlbGVjdG9yQWxsUmVnZXgiLCJSZWdFeHAiLCJwdXNoIiwiJHRhcmdldCIsImV2ZW50VHlwZSIsImdldEV2ZW50VHlwZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwiZGV0YWlsIiwic2V0Iiwic2hvd1J1bGUiLCJjb25kaXRpb25SdWxlIiwiaXNOZXN0ZWQiLCJldmFsdWF0ZUNvbmRpdGlvbnMiLCJiaW5kIiwiaW5pdCIsImZvcm1UaGVtZSIsInVwZGF0ZUZvcm1IYXNoIiwiZSIsInRhcmdldCIsImlzSW5pdCIsImdldCIsInJlc3VsdHMiLCJpIiwibG9naWMiLCJ2YWx1ZSIsInJlc3VsdCIsInRlc3RPcHRpb25zIiwidGFnTmFtZSIsInRvTG93ZXJDYXNlIiwiaW5wdXRUeXBlIiwiZ2V0QXR0cmlidXRlIiwicmVzdWx0S2V5IiwiaXNEYXRlIiwidGVzdENvbmRpdGlvbiIsImNoZWNrZWQiLCJoYXNBdHRyaWJ1dGUiLCJBcnJheSIsImZyb20iLCJvcHRpb25zIiwiJG9wdGlvbiIsInNlbGVjdGVkIiwibm9ybWFsaXNlZFJlc3VsdHMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmaW5hbFJlc3VsdCIsImV2ZXJ5IiwidmFsIiwib3ZlcnJpZGVSZXN1bHQiLCIkcGFyZW50RmllbGQiLCJjbG9zZXN0IiwiY29uZGl0aW9uYWxseUhpZGRlbiIsInNldEF0dHJpYnV0ZSIsIiRpbnB1dCIsInJlbW92ZUF0dHJpYnV0ZSIsImpzb24iLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwiZXJyb3IiLCJmaWVsZFZhbHVlIiwiRGF0ZSIsInZhbHVlT2YiLCJwYXJzZUZsb2F0Iiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwicmVnZXgiLCJhdHRyaWJ1dGVUb1NlYXJjaCIsIm91dHB1dCIsImVsZW1lbnQiLCJ0ZXN0Iiwid2luZG93Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/js/fields/conditions.js\n");

/***/ }),

/***/ "./src/js/utils/utils.js":
/*!*******************************!*\
  !*** ./src/js/utils/utils.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"eventKey\": () => (/* binding */ eventKey),\n/* harmony export */   \"isEmpty\": () => (/* binding */ isEmpty),\n/* harmony export */   \"toBoolean\": () => (/* binding */ toBoolean)\n/* harmony export */ });\nvar isEmpty = function isEmpty(obj) {\n  return obj && Object.keys(obj).length === 0 && obj.constructor === Object;\n};\nvar toBoolean = function toBoolean(val) {\n  return !/^(?:f(?:alse)?|no?|0+)$/i.test(val) && !!val;\n};\nvar eventKey = function eventKey(eventName) {\n  var namespace = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n  if (!namespace) {\n    namespace = Math.random().toString(36).substr(2, 5);\n  }\n\n  return \"\".concat(eventName, \".\").concat(namespace);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvanMvdXRpbHMvdXRpbHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sSUFBTUEsT0FBTyxHQUFHLFNBQVZBLE9BQVUsQ0FBU0MsR0FBVCxFQUFjO0VBQ2pDLE9BQU9BLEdBQUcsSUFBSUMsTUFBTSxDQUFDQyxJQUFQLENBQVlGLEdBQVosRUFBaUJHLE1BQWpCLEtBQTRCLENBQW5DLElBQXdDSCxHQUFHLENBQUNJLFdBQUosS0FBb0JILE1BQW5FO0FBQ0gsQ0FGTTtBQUlBLElBQU1JLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQVNDLEdBQVQsRUFBYztFQUNuQyxPQUFPLENBQUMsMkJBQTJCQyxJQUEzQixDQUFnQ0QsR0FBaEMsQ0FBRCxJQUF5QyxDQUFDLENBQUNBLEdBQWxEO0FBQ0gsQ0FGTTtBQUlBLElBQU1FLFFBQVEsR0FBRyxTQUFYQSxRQUFXLENBQVNDLFNBQVQsRUFBc0M7RUFBQSxJQUFsQkMsU0FBa0IsdUVBQU4sSUFBTTs7RUFDMUQsSUFBSSxDQUFDQSxTQUFMLEVBQWdCO0lBQ1pBLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxNQUFMLEdBQWNDLFFBQWQsQ0FBdUIsRUFBdkIsRUFBMkJDLE1BQTNCLENBQWtDLENBQWxDLEVBQXFDLENBQXJDLENBQVo7RUFDSDs7RUFFRCxpQkFBVUwsU0FBVixjQUF1QkMsU0FBdkI7QUFDSCxDQU5NIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2pzL3V0aWxzL3V0aWxzLmpzP2Q5ZWUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzRW1wdHkgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqICYmIE9iamVjdC5rZXlzKG9iaikubGVuZ3RoID09PSAwICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xufTtcblxuZXhwb3J0IGNvbnN0IHRvQm9vbGVhbiA9IGZ1bmN0aW9uKHZhbCkge1xuICAgIHJldHVybiAhL14oPzpmKD86YWxzZSk/fG5vP3wwKykkL2kudGVzdCh2YWwpICYmICEhdmFsO1xufTtcblxuZXhwb3J0IGNvbnN0IGV2ZW50S2V5ID0gZnVuY3Rpb24oZXZlbnROYW1lLCBuYW1lc3BhY2UgPSBudWxsKSB7XG4gICAgaWYgKCFuYW1lc3BhY2UpIHtcbiAgICAgICAgbmFtZXNwYWNlID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyKDIsIDUpO1xuICAgIH1cblxuICAgIHJldHVybiBgJHtldmVudE5hbWV9LiR7bmFtZXNwYWNlfWA7XG59O1xuIl0sIm5hbWVzIjpbImlzRW1wdHkiLCJvYmoiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwiY29uc3RydWN0b3IiLCJ0b0Jvb2xlYW4iLCJ2YWwiLCJ0ZXN0IiwiZXZlbnRLZXkiLCJldmVudE5hbWUiLCJuYW1lc3BhY2UiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/js/utils/utils.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/js/fields/conditions.js");
/******/ 	
/******/ })()
;